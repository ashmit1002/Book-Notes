<%- include("partials/header.ejs") %>
<div class="container">
  <header class="d-flex justify-content-start gap-2 py-3">
        <button class="btn btn-success rounded-pill px-3" type="button"><a href="/create">Create</a></button>

      <h3 class="text-muted fs-4">Sort By:</h3>
      <form action="/sort" method="POST">
        <input class="btn btn-secondary rounded-pill px-3" type="submit" name="sort" value="Rating" />

        <input class="btn btn-secondary rounded-pill px-3" type="submit" name="sort" value="Recency" />

        <input class="btn btn-secondary rounded-pill px-3" type="submit" name="sort" value="Title" />

      </form>

    </header>
</div>

<div class="container my-5">
  <% data.forEach((book) => { %>
    <div class="p-3 mb-3 bg-body-tertiary rounded-3">
      <div class="">
        <h1 class="col-lg-8 text-body-emphasis mx-auto"><%= book.title %></h1>
        <img src="https://covers.openlibrary.org/b/isbn/<%= book.isbn %>-L.jpg" width="150px">
        <p class="col-lg-8 text-muted mx-auto">Date: <%= book.date_read %> | Rate: <%= book.rate %> /10</p>
        <p class="col-lg-8 mx-auto fs-5">
          <%= book.review %>
        </p>
      </div>

      <div class="d-flex justify-content-end gap-2 mb-2">
        
        <button class="btn btn-primary rounded-pill px-3" type="button"><a href="/view/<%= book.id %>">View</a></button>

        <button class="btn btn-success rounded-pill px-3" type="button"><a href="/edit/<%= book.id %>">Edit</a></button>

        <form action="/delete" method="POST">
          <input type="text" name="id" hidden value="<%= book.id %>">
          <input class="btn btn-danger rounded-pill px-3" type="submit" name="delete" value="Delete" />
        </form>
      </div>
    </div>
  
  <% }); %>
</div>

<%- include("partials/footer.ejs") %>